create database server_sisped;
use server_sisped;
create table if not exists instituicao(idinst int primary key auto_increment,nome varchar(255) not null,cnpj varchar(18) not null, endereco varchar(255) not null,ativo tinyint(1) default 0);
create table if not exists sispeduser(iduser int not null primary key auto_increment,nameuser varchar(100),nome varchar(255) not null,`password` varchar(255) not null,idinst int not null,constraint fk_UserInstituicao foreign key (idinst) references instituicao(idinst));
create table if not exists dadoscrianca(idcrian int not null auto_increment primary key,nome varchar(225) not null,endereco varchar(255) not null,nascimento date not null,diasPrematuro int not null,sexo char(1) not null);
create table if not exists dadosresponsavel(idres int not null auto_increment primary key,cpf varchar(11) not null,idCrianca int not null,iduser int not null,constraint fk_ResponsavelUser foreign key (iduser) references sispeduser(iduser),constraint fk_ResponsavelCrianca foreign key (idCrianca) references dadoscrianca(idcrian));
create table if not exists dadosauxiliar(idaux int not null auto_increment primary key,nome varchar(255) not null, crm varchar(10),cpf varchar(11) not null,iduser int not null, constraint fk_AuxiliarUser foreign key(iduser) references sispeduser(iduser));
create table if not exists dadosconsulta(idcon int not null primary key auto_increment,perimetroCefalico double(6,2),peso float(6,2),altura float(6,2), obs varchar(255),dataConsulta date,idInstituicao int not null,idCrianca int not null,idAuxiliar int not null,constraint fk_CriancaConsulta foreign key (idCrianca) references dadoscrianca(idcrian), constraint fk_AuxiliarConsulta foreign key (idAuxiliar) references dadosauxiliar(idaux),constraint fk_InstituicaoConsulta foreign key (idInstituicao) references instituicao(idinst));
INSERT INTO `instituicao` (`idinst`, `nome`, `cnpj`, `endereco`,  `ativo`) VALUES (NULL, 'Instituicao Local', '00000-0', 'LocalHost', '0');
INSERT INTO `sispeduser` (`iduser`, `nameuser`, `nome`, `password`, `idinst`) VALUES (NULL, 'admin', 'Admistrador', 'd32129481a7f1fc4cb052f698e8792ca96477fc1', '1'); 
INSERT INTO `dadosauxiliar` (`idaux`,`nome`, `crm`, `cpf`, `iduser`) VALUES (NULL, 'Auxiliar', '00000-00', '00000000000', '1');